<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0072)http://www.acm.inf.ethz.ch/ProblemSetArchive/B_US_MidCen/2001/image.html -->
<HTML><HEAD><TITLE>Image Perimeters</TITLE>
<META content="text/html; charset=iso-8859-1" http-equiv=Content-Type>
<META content="MSHTML 5.00.3315.2870" name=GENERATOR>
<META content="Andrew Harrington" name=Author></HEAD>
<BODY bgColor=white>
<CENTER>
<H1>Problem G: Image Perimeters</H1></CENTER>
<CENTER>
<TABLE>
  <TBODY>
  <TR>
    <TD>Source file:</TD>
    <TD><TT>image.</TT>{<TT>c</TT>, <TT>cpp</TT>, <TT>java</TT>, 
    <TT>pas</TT>}</TD></TR>
  <TR>
    <TD>Input file:</TD>
    <TD><TT>image.in</TT></TD></TR>
  <TR>
    <TD>Output file:</TD>
    <TD><TT>image.out</TT></TD></TR></TBODY></TABLE></CENTER>
<P>Technicians in a pathology lab analyze digitized images of slides. Objects on 
a slide are selected for analysis by a mouse click on the object. The perimeter 
of the boundary of an object is one useful measure. Your task is to determine 
this perimeter for selected objects. </P>
<P>The digitized slides will be represented by a rectangular grid of periods, 
'<TT>.</TT>', indicating empty space, and the capital letter '<TT>X</TT>', 
indicating part of an object.&nbsp; Simple examples are </P>
<P><B><TT>XX&nbsp;&nbsp; Grid 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
.XXX&nbsp;&nbsp; Grid 2</TT></B> 
<BR><B><TT>XX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
.XXX</TT></B> 
<BR><B><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
.XXX</TT></B> 
<BR><B><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
...X</TT></B> 
<BR><B><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
..X.</TT></B> 
<BR><B><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
X...</TT></B> </P>
<P>An <TT>X</TT> in a grid square indicates that the entire grid square, 
including its boundaries, lies in some object.&nbsp; The <TT>X</TT> in the 
center of the grid below is <I>adjacent</I> to the <TT>X</TT> in any of the 8 
positions around it. The grid squares for any two adjacent <TT>X</TT>'s overlap 
on an edge or corner, so they are connected. </P>
<P><TT>XXX</TT> <BR><TT>X<B>X</B>X&nbsp;&nbsp;&nbsp;</TT> Central <TT>X</TT> and 
adjacent <TT>X</TT>'s <BR><TT>XXX</TT> </P>
<P>An object consists of the grid squares of all <TT>X</TT>'s that can be linked 
to one another through a sequence of adjacent <TT>X</TT>'s.&nbsp; In Grid 1, the 
whole grid is filled by one object.&nbsp; In Grid 2 there are two objects.&nbsp; 
One object contains only the lower left grid square.&nbsp; The remaining 
<TT>X</TT>'s belong to the other object. </P>
<P>The technician will always click on an <TT>X</TT>, selecting the object 
containing that <TT>X</TT>.&nbsp; The coordinates of the click are 
recorded.&nbsp; Rows and columns are numbered starting from 1 in the upper left 
hand corner.&nbsp; The technician could select the object in Grid 1 by clicking 
on row 2 and column 2.&nbsp; The larger object in Grid 2 could be selected by 
clicking on row 2, column 3. The click could not be on row 4, column 3. </P>
<P><IMG align=left height=105 hspace=20 
src="Image Perimeters.files/perimeter.gif" width=54> One useful statistic is the 
perimeter of the object.&nbsp; Assume each <TT>X</TT> corresponds to a square 
one unit on each side.&nbsp; Hence the object in Grid 1 has perimeter 8 (2 on 
each of four sides).&nbsp; The perimeter for the larger object in Grid 2 is 
illustrated in the figure at the left.&nbsp; The length is 18. </P>
<P>Objects will not contain any totally enclosed holes, so the leftmost grid 
patterns shown below could <I>NOT</I> appear. The variations on the right could 
appear: 
<P><B><TT>Impossible&nbsp;&nbsp; Possible</TT></B><B><TT></TT></B> 
<P><B><TT>XXXX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XXXX&nbsp;&nbsp; 
XXXX&nbsp;&nbsp; XXXX</TT></B> 
<BR><B><TT>X..X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XXXX&nbsp;&nbsp; 
X...&nbsp;&nbsp; X...</TT></B> 
<BR><B><TT>XX.X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XXXX&nbsp;&nbsp; 
XX.X&nbsp;&nbsp; XX.X</TT></B> 
<BR><B><TT>XXXX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XXXX&nbsp;&nbsp; 
XXXX&nbsp;&nbsp; XX.X</TT></B><B><TT></TT></B> 
<P><B><TT>.....&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .....&nbsp; 
.....&nbsp; .....</TT></B> 
<BR><B><TT>..X..&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ..X..&nbsp; 
..X..&nbsp; ..X..</TT></B> 
<BR><B><TT>.X.X.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .XXX.&nbsp; 
.X...&nbsp; .....</TT></B> 
<BR><B><TT>..X..&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ..X..&nbsp; 
..X..&nbsp; ..X..</TT></B> 
<BR><B><TT>.....&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .....&nbsp; 
.....&nbsp; .....</TT></B><B></B> </P>
<P>The input will contain one or more grids.&nbsp; Each grid is preceded by a 
line containing the number of rows and columns in the grid and the row and 
column of the mouse click.&nbsp; All numbers are in the range 1-20.&nbsp; The 
rows of the grid follow, starting on the next line, consisting of '<TT>.</TT>' 
and '<TT>X</TT>' characters. </P>
<P>The end of the input is indicated by a line containing four zeros.&nbsp; The 
numbers on any one line are separated by blanks.&nbsp; The grid rows contain no 
blanks. </P>
<P>For each grid in the input, the output contains a single line with the 
perimeter of the specified object. </P>
<TABLE border=1 cellPadding=20>
  <TBODY>
  <TR>
    <TD><B>Example input:</B> <PRE><TT>
2 2 2 2
XX
XX
6 4 2 3
.XXX
.XXX
.XXX
...X
..X.
X...
5 6 1 3
.XXXX.
X....X
..XX.X
.X...X
..XXX.
7 7 2 6
XXXXXXX
XX...XX
X..X..X
X..X...
X..X..X
X.....X
XXXXXXX
7 7 4 4
XXXXXXX
XX...XX
X..X..X
X..X...
X..X..X
X.....X
XXXXXXX
0 0 0 0</TT>
</PRE></TD>
    <TD vAlign=top><B>Example output:</B> <PRE><TT>
8
18
40
48
8
</TT></PRE></TD></TR></TBODY></TABLE><I><FONT size=-1>Last modified Sat Oct 27 
20:30:01 2001</FONT></I> </BODY></HTML>
