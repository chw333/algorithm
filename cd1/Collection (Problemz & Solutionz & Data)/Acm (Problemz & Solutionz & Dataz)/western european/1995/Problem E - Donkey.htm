<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0048)http://www.karrels.org/Ed/ACM/weur95/prob_e.html -->
<HTML><HEAD><TITLE>Problem E - Donkey</TITLE>
<META content="text/html; charset=ks_c_5601-1987" http-equiv=Content-Type><LINK 
href="mailto:Ed@Tool.com" rev=made>
<META content="MSHTML 5.00.3315.2870" name=GENERATOR></HEAD>
<BODY><EM>Not an official ACM page</EM> <BR>[<A 
href="http://www.karrels.org/Ed/ACM/weur95/prob_f.html">Problem F</A> | <A 
href="http://www.karrels.org/Ed/ACM/weur95/index.html">1995 Western Europe 
problem set</A> | <A href="http://www.karrels.org/Ed/ACM/index.html">Ed's 
programming contest problem archive</A> | <A 
href="http://www.karrels.org/Ed/index.html">my home page</A>] 
<HR>

<CENTER>
<H3>1995-1996 ACM International Collegiate Programming Contest<BR>Western 
European Regional</H3>
<H1>Problem E </H1>
<H2>Donkey </H2></CENTER>Long ago, a number of farmers wanted to sell their 
donkeys. These farmers lived in a small village and the marketplace was in the 
capital. There was only one small road from the village the farmers lived in to 
the capital, and one day the farmers left for the long journey towards the 
capital. Every farmer wanted to travel as fast as possible to be the first to 
sell his donkey, but there was one major problem: the donkeys were very 
stubborn; everytime a donkey reached a river there was a chance that he would 
stay there for some time, not willing to cross the river. However, two donkeys 
never rested at the same river. 
<P>The game 'Donkey' is derived from this legend: <EM>N</EM> players (numbered 
from 1..<EM>N</EM>) start with their donkey in the village. Between the village 
and the capital are <EM>M</EM> rivers. The players take turns in throwing a 
fair, 6-sided die and move their donkey the thrown number of rivers towards the 
capital. Since only one donkey can rest at a river, the donkey is placed at the 
next free river if necessary. After player 1 has thrown the die, it is player 
2's turn, etc. After <EM>N</EM> comes 1. The player that passes all rivers first 
wins the game. 
<P>This is an example of a 'Donkey' gameboard, where <EM>N</EM> = 2 and 
<EM>M</EM> = 6. Player 1's donkey is located at river 4 and player 2's donkey is 
located at river 1. 
<P><IMG src="Problem E - Donkey.files/donkey.gif"> 
<P>Your task is to give the probability that player 1 wins the game, given a 
certain board position. 
<P>
<H3>Input Specification </H3>The first line contains a single integer which 
equals the number of test cases that follow. Each of the following lines 
contains one test case. The first integer on a line gives the number of rivers 
<EM>M</EM>, the second integer gives the number of players <EM>N</EM> (1 &lt;= 
<EM>N</EM> &lt;= 4 and <EM>N</EM> ¡¿ <EM>M</EM> &lt;= 50). Then follow <EM>N</EM> 
integers <EM>P<SUB>i</SUB></EM> (0 &lt;= <EM>P<SUB>i</SUB></EM> &lt;= 
<EM>M</EM>, 1 &lt;= <EM>i</EM> &lt;= <EM>N</EM>), representing the position of 
the <EM>i</EM>th player. The river closest to the village has number 1, the 
river closest to the capital has number <EM>M</EM>. The village has number 0. 
Two donkeys may not be positioned at the same river. However, more than one 
donkey may be standing in the village. The last integer on the line gives the 
player, whose turn it is. 
<P>
<H3>Output Specification </H3>For every situation you have to print the 
following line, giving the game number (1 for the first, 2 for the second, ...) 
and the probability player 1 wins with an accuracy of 3 decimals: 
<BLOCKQUOTE><PRE>Game <EM>N</EM>:the probability that player 1 wins = <EM>D.DDD</EM>
</PRE></BLOCKQUOTE>
<P>
<H3>Example Input</H3><PRE>3
3 2 1 2 1
6 3 1 2 3 2
6 3 4 1 3 2
</PRE>
<H3>Example Output</H3><PRE>Game 1:the probability that player 1 wins = 0.667
Game 2:the probability that player 1 wins = 0.093
Game 3:the probability that player 1 wins = 0.366
</PRE>
<HR>
This page maintained by <A href="mailto:Ed@Tool.com">Ed Karrels</A>.<BR>Last 
updated January 3, 1998 </BODY></HTML>
