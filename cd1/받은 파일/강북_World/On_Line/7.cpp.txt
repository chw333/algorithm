#include <stdio.h>
#include <conio.h>
#include <mem.h>
#include <Stdlib.h>
#define Max 15
int size[15]={0,2,2,3,1,3,3,7,2,1,3,2,3};
int time3[15]={0,3,2,5,1,4,3,6,2,3,1,2,5};
int time2[15]={0,3,2,5,1,4,3,6,2,3,1,2,5};
int q[Max],qp,timep=1;
int memory[Max]={-32,-32,-32,-32,-32,-32,-32,-32,-32,-32,-32,-32,-32},mp;
int dat_p=1;
int total;

void process()
{
  int i,j;
  int empty;

  while(size[dat_p]<=10-mp&&dat_p<=12) {
	mp+=size[dat_p];
	q[++qp]=dat_p;

	empty=size[dat_p];
	for(i=1;i<=10;i++){
	  if(empty==0) break;
	  if(memory[i]==-32) {
		memory[i]=dat_p  ;
		empty--;
	  }
	}
		if(dat_p<=12) dat_p++;
  }
  for(i=qp+1;i<=10;i++) q[i]=-32;
}

void process2()
{
  int i;
  time2[q[timep]]--;
  if(time2[q[timep]]==0) {
	mp-=size[q[timep]];
	for(i=1;i<=10;i++)
	  if(memory[i]==q[timep]) memory[i]=-32;
	for(i=timep;i<qp;i++)
	  q[i]=q[i+1];
	qp--;
  }
  timep++;
  if(timep>qp) timep=1;
}

void display()
{
  int i,j;
  clrscr();
  printf("Queue\n");
  printf("----------------------\n");
  for(i=1;i<=qp;i++)
	printf("%c ",q[i]-1+'A');
  printf("\n----------------------\n");
  printf("                             Work list\n");
  printf("(Memory)                     no.  name.  size.  time.  time2.\n");
  printf("----------               ----------------------------------------\n");
  for(i=1;i<=12;i++) {
  if(i<=10) {
	printf(" | %c |                      %2d     %c      %d       %d   ",memory[i]+'A'-1,i,i+'A'-1,size[i],time3[i]);
	if(time2[i]==0) printf(" End\n");
	else printf("  %d\n",time2[i]);
	}
  else if(i==11) {
	printf("---------                   %2d     %c      %d       %d   ",i,i+'A'-1,size[i],time3[i]);
	if(time2[i]==0) printf(" End\n");
	else printf("  %d\n",time2[i]);

	}
  else {
	printf("                            %2d     %c      %d       %d   ",i,i+'A'-1,size[i],time3[i]);
	if(time2[i]==0) printf(" End\n");
	else printf("  %d\n",time2[i]);

	}
  }
  printf("Time = %d\n",total);
}


void main()
{
  while(1) {
	process();

	display();

	getch();
	if(qp==0) break;
	total++;
	process2();

  }
}