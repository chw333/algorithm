#include <fstream.h>

const int Maxn = 100;

int m, n;
int yy, xx;
int table[Maxn][Maxn][2];
int data[Maxn][Maxn];
int max;
int t;

int input();
int n3(int, int, int, int);
int output();

int main()
{
	input();
	int i, j;
	for(j = 0; j < m; j++)
		for(i = 0; i < n; i++)
		{
			if (table[i][j][0] == 0) yy = i, xx = j, n3(i, j, 0, 0);
			if (table[i][j][1] == 0) yy = i, xx = j, n3(i, j, 1, 0);
		}
	output();
	return 0;
}

int input()
{
	cout << "입력(열, 해)";
	cin >> m >> n;
	int i;
	for(i = 0; i < n; i++)
	{
		cout << i << "해 = ?";
		for(int j = 0; j < m; j++)
		{
			char c;
			cin >> c;
			data[i][j] = c - 97;
		}
	}
	return 0;
}

int output()
{
	cout << "폐 공간의 수 : " << t << endl;
	cout << "가장 긴 폐 공간의 나무토막 개수 : " << max << endl;
	return 0;
}

int n3(int y, int x, int z, int q)
{
	if (y == yy && x == xx && q != 0)
	{
		t++;
		if (max < q) max = q;
	}
	if (table[y][x][z] == 1) return 1;
	table[y][x][z] = 1;
	if (data[y][x] == 0 && z == 0)
	{
		if (x + 1 < m && data[y][x + 1] == 1) n3(y, x + 1, 0, q + 1);
		else if (x + 1 < m && y + 1 < n && data[y][x + 1] == 0) n3(y + 1, x + 1, 0, q + 1);
		else if (y + 1 < n && data[y + 1][x] == 1 && x != m - 1) n3(y + 1, x, 1, q + 1);
	}
	else if (data[y][x] == 0 && z == 1)
	{
		if (x - 1 > -1 && data[y][x - 1] == 1) n3(y, x - 1, 1, q + 1);
		else if (y - 1 > -1 && x - 1 > -1 && data[y - 1][x - 1] == 0) n3(y - 1, x - 1, 1, q + 1);
		else if (y - 1 > -1 && data[y - 1][x] == 1 && x != 0) n3(y - 1, x, 0, q + 1);
	}
	else if (data[y][x] == 1 && z == 0)
	{
		if (y - 1 > -1 && data[y - 1][x] == 0) n3(y - 1, x, 1, q + 1);
		else if (y - 1 > -1 && x + 1 < m && data[y - 1][x + 1] == 1) n3(y - 1, x + 1, 0, q + 1);
		else if (x + 1 < m && data[y][x + 1] == 0 && y != 0) n3(y, x + 1, 0, q + 1);
	}
	else if (data[y][x] == 1 && z == 1)
	{
		if (y + 1 < n && data[y + 1][x] == 0) n3(y + 1, x, 0, q + 1);
		else if (y + 1 < n && x - 1 > -1 && data[y + 1][x - 1] == 1) n3(y + 1, x - 1, 1, q + 1);
		else if (x - 1 > -1 && data[y][x - 1] == 0 && y != n - 1) n3(y, x - 1, 1, q + 1);
	}
	return 0;
}