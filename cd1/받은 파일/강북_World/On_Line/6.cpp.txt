#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#define Max 101
typedef struct point { int x;int y;} Point;
Point p[Max];
int pp;
int solution;
void read_dat()
{
  while(1) {
	printf("Point (x,y) ? ");
	pp++;
	scanf("%d, %d",&p[pp].x,&p[pp].y);
	if(pp>1&&p[pp].x==p[1].x&&p[pp].y==p[1].y) break;
  }
}

void draw()
{
  int i,j;
  clrscr();
  printf("Point = ");
  for(i=1;i<=pp;i++)
	printf("(%d,%d) ",p[i].x,p[i].y);

  for(i=1;i<20;i++) {
	gotoxy(40,i+4);
	if(i%5==0) printf("+");
	else printf("|");
  }
  gotoxy(39,9);printf("5");
  gotoxy(38,19);printf("-5");
  gotoxy(21,14);
  printf("----+----+----+----+----+----+----+----");
  gotoxy(21,15);
  printf("        -10                  10  ");
  for(i=1;i<pp;i++) {
	gotoxy(40+p[i].x,14-p[i].y);printf("%c",i-1+'A');
  }
}

int Area(Point a,Point b,Point c)
{
  int i,j;
  double value;
  value=a.x*b.y-a.y*b.x
	   +b.x*c.y-b.y*c.x
	   +c.x*a.y-c.y*a.x;
  if(value==0) return 0;
  if(value<0) return -1;
  return 1;
}

void convex()
{
  int i,j,l,m;
  Point temp;
  for(i=1;i<pp;i++)
	for(j=i+1;j<pp;j++)
	  for(l=j+1;l<pp;l++)
		for(m=l+1;m<pp;m++) {
		  if(Area(p[i],p[j],p[l])*Area(p[i],p[j],p[m])<0&&
			 Area(p[l],p[m],p[i])*Area(p[l],p[m],p[j])<0) {
			 solution=2;return;
		  }
	}
  for(i=1;i<pp-2;i++) {
	if(Area(p[i],p[i+1],p[i+2])*Area(p[i+1],p[i+2],p[i+3])<0) {
	  solution=1;break;
	}
  }
}
void output_dat()
{
  clrscr();
  switch(solution) {
	case 0 : printf("Convex hull\n");break;
	case 1 : printf("Not convex hull\n");break;
	case 2 : printf("Not poly gon\n");break;
  }
}

void main()
{
  char ins_key;
  while(1) {
	read_dat();
	draw();
	getch();
	convex();
	output_dat();
	printf("Try again ? (y/n) ");
	ins_key=getch();
	if(ins_key=='n'||ins_key=='N') break;
  }
}

