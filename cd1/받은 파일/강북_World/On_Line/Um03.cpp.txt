#include <fstream.h>
#include <conio.h>
#include <ctype.h>

int xs[100]={0},ys[100]={0},n=0;

int ccw(int x1,int y1,int x2,int y2,int x3,int y3)
{
    long xx1,xx2,yy1,yy2;
    xx1=x2-x1;xx2=x3-x1;
    yy1=y2-y1;yy2=y3-y1;
    if(xx1*yy2>xx2*yy1)
        return 1;
    if(xx1*yy2<xx2*yy1)
        return -1;
    return 0;
}

int intersect(int x1,int x2,int y1,int y2,int x3,int y3,int x4,int y4)
{
    if(ccw(x1,y1,x2,y2,x3,y3)!=ccw(x1,y1,x2,y2,x4,y4))
        if(ccw(x3,y3,x4,y4,x1,y1)!=ccw(x3,y3,x4,y4,x2,y2))
             return 1;
    if((ccw(x1,y1,x2,y2,x3,y3)==ccw(x1,y1,x2,y2,x4,y4)) && (ccw(x1,y1,x2,y2,x3,y3)==0))
        return 1;
    return 0;
}

void main(void)
{
    int i,x,y,j;
a:
    while(1)
    {
        cout << "Position(x,y)?";
        cin >> x >> y;
        xs[n]=x;ys[n++]=y;
        if((n!=1) && (xs[n-1]==xs[0]) && (ys[n-1]==ys[0])) break;
    }
    n--;
    for(i=0;i<n-3;i++)
    {
        for(j=i+2;j<n-1;j++)
        {
            if(intersect(xs[i],ys[i],xs[i+1],ys[i+1],xs[j],ys[j],xs[j+1],ys[j+1]))
            {
                cout << "It is not a Polygon" << endl;
                goto a;
            }
        }
    }
    clrscr();
    cout << "Point's Position : ";
    for(i=0;i<n;i++)
        cout << "(" << xs[i] << "," << ys[i] << ") ";
    cout << endl; cout << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "                    5+" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "  ----+----+----+----+----+----+----+----" << endl;
    cout << "          -10        |         10" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "                   -5+" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    cout << "                     |" << endl;
    for(i=0;i<n;i++)
    {
       gotoxy(22+xs[i],12-ys[i]);
       cout << (char)(i+65);
    }
    gotoxy(1,22);
    cout << "Result : ";
    for(i=0;i<n-3;i++)
    {
        if(ccw(xs[i],ys[i],xs[i+1],ys[i+1],xs[i+2],ys[i+2]) != ccw(xs[i+1],ys[i+1],xs[i+2],ys[i+2],xs[i+3],ys[i+3]))
        {
            cout << "OMOK" << endl;
            goto b;
        }
    }
    if(ccw(xs[n-3],ys[n-3],xs[n-2],ys[n-2],xs[n-1],ys[n-1]) != ccw(xs[n-2],ys[n-2],xs[n-1],ys[n-1],xs[n],ys[n]))
    {
        cout << "OMOK" << endl;
        goto b;
    }
    if(ccw(xs[n-1],ys[n-1],xs[0],ys[0],xs[1],ys[1]) != ccw(xs[n-2],ys[n-2],xs[n-1],ys[n-1],xs[n],ys[n]))
    {
        cout << "OMOK" << endl;
        goto b;
    }
    cout << "BOLOK" << endl;
b:
    {
        char yn;
        cout << "Retry?(y/n)";
        yn=getch();
        if(toupper(yn)=='Y') goto a;
    }
}
