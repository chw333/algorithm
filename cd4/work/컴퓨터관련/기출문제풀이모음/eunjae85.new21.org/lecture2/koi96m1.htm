<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<title>연속 부분 최대곱</title>
<meta name="generator" content="Namo WebEditor v3.0">
</head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">

<p>연속 부분 최대곱</p>
<p>동적 계획법을 사용해서 풀 수 있는 문제이다. 부분 문제 C[i]를 다음과 같이 
정의하도록 하자. (단, A[i]는 i번째 숫자를 말한다)</p>
<p>C[i] = 'A[i]를 마지막으로 하는 연속부분의 최대곱'</p>
<p>우리가 풀려고 하는 문제는 어떤 수가 최대곱을 갖는 연속부분의 끝 수가 될지 
알 수 없다. 그러므로 모든 i에 대해서 C[i]의 최대를 찾아야 한다.</p>
<p>우리가 찾는 답 = max {C[1], C[2], ..., C[N]}</p>
<p>가령 C[5]를 구하고자 한다면, C[5] = ... * ... * ... * ... * A[5]가 된다. 
그런데 A[5]를 제외한 앞 부분 역시 최대가 되어야 C[5]도 최대가 될 것이다. (A[5]라는 
숫자는 항상 쓰이므로 고려하지 않아도 된다.) 그런데 A[5]를 제외한 앞부분이 최대가 
된다는 말은 곧 C[4]라는 뜻도 된다.</p>
<p>즉 보통의 경우 C[5]=C[4]*A[5]이 성립한다. 하지만 C[4]가 아무리 최대라 하더라도 
1보다 작은 수라면 C[4]*A[5]는 A[5]보다 작게 된다. 이런 경우에는 C[5]=A[5]가 
된다. 이 내용을 정리하면,</p>
<p><font face="굴림체" color="red">C[i] =</font><font face="굴림체"> C[i-1]&lt;1 
or i=1일 때 </font><font face="굴림체" color="red">A[i]</font><font face="굴림체"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;아니라면</font><font
 face="굴림체" color="red">&nbsp;C[i-1]*A[i]</font></p>
<p><font face="굴림체">위와 같은 점화식을 얻을 수 있다. 다음은 위의 점화식을 
기초로 한 소스인데, 동적계획법을 사용함에도 배열을 쓰지 않는 것을 볼 수 있다. 
C[i]를 구하기 위해서는 C[i-1]의 한 항만 기억하고 있으면 되므로, 굳이 배열을 
써 메모리를 낭비할 필요가 없기 때문이다.</font></p>
<p><font face="굴림체">program KOI96M1;</font></p>
<p><font face="굴림체">var<br>
&nbsp;&nbsp;f : text;<br>
&nbsp;&nbsp;i, n : integer;<br>
&nbsp;&nbsp;t, a, max : double;</font></p>
<p><font face="굴림체">begin<br>
&nbsp;&nbsp;assign (f, 'input.txt');<br>
&nbsp;&nbsp;reset (f);</font></p>
<p><font face="굴림체">&nbsp;&nbsp;readln (f, n);</font></p>
<p><font face="굴림체">&nbsp;&nbsp;a := 1.0;<br>
&nbsp;&nbsp;max := -100000000.0;</font></p>
<p><font face="굴림체">&nbsp;&nbsp;for i := 1 to n do begin<br>
&nbsp;&nbsp;&nbsp;&nbsp;readln (f, t);</font></p>
<p><font face="굴림체">&nbsp;&nbsp;&nbsp;&nbsp;if a &gt;= 1.0 then a := a * 
t<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else 
a := t;</font></p>
<p><font face="굴림체">&nbsp;&nbsp;&nbsp;&nbsp;if a &gt; max then max := a;<br>
&nbsp;&nbsp;end;</font></p>
<p><font face="굴림체">&nbsp;&nbsp;close (f);</font></p>
<p><font face="굴림체">&nbsp;&nbsp;assign (f, 'output.txt');<br>
&nbsp;&nbsp;rewrite (f);</font></p>
<p><font face="굴림체">&nbsp;&nbsp;writeln (f, max:1:3);</font></p>
<p><font face="굴림체">&nbsp;&nbsp;close (f);<br>
end.</font></p>
</body>

</html></html>