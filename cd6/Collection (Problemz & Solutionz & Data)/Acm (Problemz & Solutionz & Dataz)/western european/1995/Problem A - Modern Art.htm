<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0048)http://www.karrels.org/Ed/ACM/weur95/prob_a.html -->
<HTML><HEAD><TITLE>Problem A - Modern Art</TITLE>
<META content="text/html; charset=ks_c_5601-1987" http-equiv=Content-Type><LINK 
href="mailto:Ed@Tool.com" rev=made>
<META content="MSHTML 5.00.3315.2870" name=GENERATOR></HEAD>
<BODY><EM>Not an official ACM page</EM> <BR>[<A 
href="http://www.karrels.org/Ed/ACM/weur95/prob_b.html">Problem B</A> | <A 
href="http://www.karrels.org/Ed/ACM/weur95/index.html">1995 Western Europe 
problem set</A> | <A href="http://www.karrels.org/Ed/ACM/index.html">Ed's 
programming contest problem archive</A> | <A 
href="http://www.karrels.org/Ed/index.html">my home page</A>] 
<HR>

<CENTER>
<H3>1995-1996 ACM International Collegiate Programming Contest<BR>Western 
European Regional</H3>
<H1>Problem A </H1>
<H2>Modern Art </H2></CENTER>The famous painter Mel Borp is working on a 
brilliant series of paintings that introduce a new experimental style of Modern 
Art. At first glance, these paintings look deceptively simple, since they 
consist only of triangles of different sizes that seem to be stacked on top of 
each other. Painting these works, however, takes an astonishing amount of 
consideration, calculation, and precision since all triangles are painted 
without taking the brush off the canvas. How exactly Mel paints his works is a 
well-kept secret. 
<P>Recently, he started on the first painting of his new series. It was a single 
triangle, titled <EM>T</EM><SUB>0,0</SUB>. After that, he created 
<EM>T</EM><SUB>1,1</SUB>, the basis for his other works (see Figure 1). 
<P>
<CENTER><IMG src="Problem A - Modern Art.files/art_fig1.gif"> 
<P>Figure 1: Early work: <EM>T</EM><SUB>0,0</SUB> (left) and 
<EM>T</EM><SUB>1,1</SUB> (right). </CENTER>
<P>Then he decided to take his experimenting one step further, and he painted 
<EM>T</EM><SUB>1,2</SUB> and <EM>T</EM><SUB>3,2</SUB>. Compare Figure 1 and 
Figure 2 to fully appreciate the remarkable progression in his work. 
<P>
<CENTER><IMG src="Problem A - Modern Art.files/art_fig2.gif"> 
<P>Figure 2: Advanced work: <EM>T</EM><SUB>1,2</SUB> (left) and 
<EM>T</EM><SUB>3,2</SUB> (right). </CENTER>
<P>Note that the shape of the painting can be deduced from its title, 
<EM>T</EM><SUB><EM>p,q</EM></SUB>, as follows: 
<UL>
  <LI><EM>T</EM><SUB>0,0</SUB> is a single triangle (see Figure 1); 
  <LI><EM>T</EM><SUB>1,1</SUB> consists of a smaller, inverted triangle placed 
  inside <EM>T</EM><SUB>0,0</SUB>, so that the result consists of four smaller 
  triangles (see Figure 1); 
  <LI>if <EM>p</EM> &gt; 0 and <EM>q</EM> &gt; 1, then the painting looks like 
  <EM>T</EM><SUB><EM>p</EM>,<EM>q</EM>-1</SUB>, except that an inverted triangle 
  has been placed inside the bottom-right triangle of 
  <EM>T</EM><SUB><EM>p</EM>,<EM>q</EM>-1</SUB>, splitting it into four smaller 
  triangles (compare for example <EM>T</EM><SUB>1,1</SUB> and 
  <EM>T</EM><SUB>1,2</SUB>); 
  <LI>if <EM>p</EM> &gt; 1 and <EM>q</EM> &gt; 0, the painting looks like 
  <EM>T</EM><SUB><EM>p</EM>-1,<EM>q</EM></SUB>, except that an inverted triangle 
  has been placed inside the bottom-left triangle of 
  <EM>T</EM><SUB><EM>p</EM>-1,<EM>q</EM></SUB>, splitting it into four smaller 
  triangles; 
  <LI>other values of <EM>p</EM> and <EM>q</EM>: it is not a valid title of a 
  painting. </LI></UL>
<P>The triangles of a painting look all the same (each triangle is an isosceles 
triangle with two sides of the same length), but their height and width depend 
on the size of the canvas Mel used. 
<P>Mel wanted to end the series with T</EM><SUB>10,10</SUB>, the most complex 
painting he thought he would be able to paint. But no matter how many times he 
tried, he could not get it right. Now he is desperate, and he hopes you can help 
him by writing a program that prints, in order, the starting and ending 
coordinates of the lines Mel has to paint. Of course, you will need to know how 
Mel paints his works, so we will now reveal his secret technique. 
<P>As an example, take a look at T</EM><SUB>1,2</SUB> (see Figure 3): 
<P>
<CENTER><IMG src="Problem A - Modern Art.files/art_fig3.gif">
<P>Figure 3: <EM>T</EM><SUB>1,2</SUB>. </CENTER>
<P>Mel always starts at the top of the top triangle, drawing a line straight to 
the lower-left corner of the lower left triangle (in this example, 1-2), 
continuing with a line to the lower-right corner of that triangle (in this 
example, 2-3). Next, he works his way up by drawing a line to the top of that 
triangle (in this example, 3-4). Now he has either reached the starting point 
again (finishing yet another masterpiece) or he has reached the lower-left 
corner of another triangle (in this example, 1-4-5). In the latter case, he 
continues by drawing the bottom line of that triangle (4-5) and after that he 
starts working on the triangle or triangles that is or are located underneath 
the lower-right corner of that triangle, in the same way. So he continues with 
(5-3), (3-6), (6-7), (7-8), (8-6), (6-9), and (9-1) as the finishing touch. 
<P>
<H3>Input Specification</H3>
<P>The first line of the input contains the number of test cases. Each test case 
consists of one line containing four non-negative integers <EM>p</EM>, 
<EM>q</EM>, <EM>x</EM>, and <EM>y</EM>, separated by spaces. 
<EM>T</EM><SUB><EM>p</EM>,<EM>q</EM></SUB> is the title of the painting and 
(<EM>x</EM>,<EM>y</EM>) are the coordinates of the top of the top triangle. 
Further, <EM>p</EM>,<EM>q</EM> &lt;= 10 and <EM>x</EM>,<EM>y</EM> &lt; 32768. 
All triangles have a nonzero area. 
<P>
<H3>Output Specification </H3>
<P>For every test case, the output contains the pairs of (<EM>x</EM>,<EM>y</EM>) 
integer coordinates of the starting and ending points of all lines Mel has to 
draw for the painting <EM>T</EM><SUB><EM>p</EM>,<EM>q</EM></SUB> in the right 
order, in the format 
<BLOCKQUOTE>(<EM>startX</EM>, <EM>startY</EM>)(<EM>endX</EM>, <EM>endY</EM>) 
</BLOCKQUOTE>followed by a newline. The output for each test case must be 
followed by an empty line. 
<P>
<H3>Example Input </H3><PRE>2
0 0 1 1
1 2 512 1024
</PRE>
<H3>Example Output </H3><PRE>(1,1)(0,0)
(0,0)(2,0)
(2,0)(1,1)

(512,1024)(0,0)
(0,0)(512,0)
(512,0)(256,512)
(256,512)(768,512)
(768,512)(512,0)
(512,0)(768,0)
(768,0)(640,256)
(640,256)(896,256)
(896,256)(768,0)
(768,0)(1024,0)
(1024,0)(512,1024)
</PRE>
<HR>
This page maintained by <A href="mailto:Ed@Tool.com">Ed Karrels</A>.<BR>Last 
updated January 3, 1998 </BODY></HTML>
